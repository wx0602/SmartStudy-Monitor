========================================================================
                    SmartStudy Monitor UI 模块说明文档
========================================================================
项目版本：Light Pro (浅色办公风格)
更新日期：2026-01-26
开发框架：PyQt5

[1] 文件夹结构与职责
------------------------------------------------------------------------
app/ui/
│
├── main_window.py       [核心控制器]
│   - 程序的 UI 入口，管理整体布局（左视频+下数据 | 右侧栏）。
│   - 负责 AI 线程 (AIWorker) 的启动与信号连接。
│   - 负责“报警状态机”逻辑 (判断何时触发红框/黄气泡)。
│   - 负责视频画面的渲染与悬浮弹窗 (Alerts) 的定位。
│
├── dashboard.py         [下方数据栏整合器]
│   - 这是一个容器文件。
│   - 职责：导入 dashboard_modules 下的三个子模块。
│   - 布局：使用 QHBoxLayout 将三个模块以 1:1:1 的比例横向排列。
│
├── controls.py          [右侧-设置面板]
│   - 包含 7 个监控开关 (玩手机、离席、闭眼、坐姿、距离、托腮、摸脸)。
│   - 包含音量调节滑块。
│   - 特性：复选框使用 Base64 编码的蓝色对号图标，去除了原生背景填充。
│
├── clock.py             [右侧-时钟面板]
│   - 显示当前时间 (HH:mm:ss) 和日期。
│   - 字体经过适配，在 320px 宽度下完美居中，无滚动条。
│
├── common.py            [通用组件库]
│   - CyberLabel: 自定义样式的标签 (虽然叫Cyber，现已适配浅色风)。
│   - StatusLight: 状态指示灯 (灰色/红色切换)。
│
└── dashboard_modules/   [下方子模块包]
    ├── focus_card.py    (模块 1.1: 注意力) - 显示专注分、疲劳、分心率。
    ├── posture_card.py  (模块 1.2: 坐姿)   - 显示距离、肩斜、颈前角度。
    └── behavior_card.py (模块 1.3: 行为)   - 显示手机、离席等4个状态灯。

[2] 布局与尺寸规范 (Layout Specs)
------------------------------------------------------------------------
1. 主窗口 (MainWindow)
   - 最小尺寸: 1280 x 850
   - 左侧区域权重: Stretch = 1 (自动填充剩余空间)
   - 右侧区域权重: Stretch = 0 (固定宽度)

2. 右侧侧边栏 (Right Sidebar)
   - 宽度: 固定 320px (setFixedWidth)
   - 滚动条: 横向滚动条被 CSS 强制隐藏 (height: 0px)。

3. 下方监控栏 (Bottom Monitor)
   - 高度: 固定 180px
   - 内部模块比例: 1 : 1 : 1 (Focus : Posture : Behavior)

[3] 视觉风格规范 (Visual Style - Light Mode)
------------------------------------------------------------------------
- 全局背景: #f4f5f7 (淡灰) / #ffffff (纯白卡片)
- 边框颜色: #e0e0e0 (浅灰)
- 文字颜色: #333333 (深灰/黑)
- 强调色:
  - 蓝色 (#007bff): 正常高亮、专注分、复选框选中。
  - 绿色 (#28a745): 状态良好、正常。
  - 红色 (#dc3545): 核心违规、严重警告。
  - 黄色 (#ffc107): 轻度提示。

[4] 报警逻辑说明 (Alert Logic)
------------------------------------------------------------------------
报警分为两级，由 main_window.py 中的 update_dashboard 函数控制：

Type 2 (重度违规):
- 位置: 视频正中间，红色大框。
- 触发条件: 玩手机、离席。
- 优先级: 最高，可打断 Type 1。

Type 1 (轻度提示):
- 位置: 视频右下角，黄色气泡。
- 触发条件: 闭眼、距离过近、坐姿不正、托腮、摸脸。
- 优先级: 低，只有在无重度违规时显示。

*注: 所有报警均有 2秒蓄力(防止误报) 和 3秒锁定(防止闪烁) 机制。